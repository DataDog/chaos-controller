# Unless explicitly stated otherwise all files in this repository are licensed
# under the Apache License Version 2.0.
# This product includes software developed at Datadog (https://www.datadoghq.com/).
# Copyright 2021 Datadog, Inc.

apiVersion: chaos.datadoghq.com/v1beta1
kind: Disruption
metadata:
  name: disruption-sample
  namespace: chaos-engineering # disruption resource must be in the same namespace as targeted pods
spec:
  level: pod # level the disruption should be injected at (can be either pod or node, defaults to pod)
  selector: # label selector to target pods
    app: demo
  count: 1 # number of pods to target or a percentage (1% - 100%)
  containers: # optional, name of the containers to target within the targeted pod, by default all pods are targeted
    - demo
  network: # network disruption settings, all those disruptions are applied to outgoing traffic only
    hosts: # optional (targets all hosts if not specified)
      - 10.0.0.0/8 # destination host
    port: 80 # optional, port to drop packets on
    protocol: tcp # optional, protocol to drop packets on (can be tcp or udp, defaults to both)
    flow: egress # optional, flow direction (egress: outgoing traffic, ingress: incoming traffic, defaults to egress)
    bandwidthLimit: 10000 # "mandatory", at least one of `bandwidthLimit`, `delay`, `drop`, `corrupt`, or `duplicate` must be specified; bandwidth limit in bytes
