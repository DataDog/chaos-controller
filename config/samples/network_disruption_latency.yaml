# Unless explicitly stated otherwise all files in this repository are licensed
# under the Apache License Version 2.0.
# This product includes software developed at Datadog (https://www.datadoghq.com/).
# Copyright 2020 Datadog, Inc.

apiVersion: chaos.datadoghq.com/v1beta1
kind: Disruption
metadata:
  name: disruption-sample
  namespace: chaos-engineering # disruption resource must be in the same namespace as targeted pods
spec:
  level: pod # level the disruption should be injected at (can be either pod or node, defaults to pod)
  selector: # label selector to target pods
    app: demo
  count: 1 # number of pods to target or a percentage (1% - 100%)
  network: # network disruption settings, all those disruptions are applied to outgoing traffic only
    flow: egress # optional, flow direction (egress: outgoing traffic, ingress: incoming traffic, defaults to egress)
    delay: 100 # optional, latency to apply to packets in ms
    jitter: 50 # optional, add X % (1-100) of delay as jitter to delay (+- X% ms to original delay), defaults to 10%, cannot be set to 0
